#!/usr/bin/env node

var program = require('commander');
var search = require('../');
var readline = require('readline');
var open = require('open');


program
  .version('0.0.1')

program
  .command('search <query>')
  .description('search platzi blog')
  .action(function(query){
    search(query, function (blogposts) {
      blogposts.forEach(function (b, i) {
        console.log((i+1) + ' - ' + b.title)
      })

      var rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
        terminal: false
      });

      rl.question('Elija un blogpost: ', function(number){
        open(blogposts[number - 1].url);
        rl.close();
      })

    })
  });

program
  .command('*')
  .action(function(env){
    console.log('Enter a Valid command');
    process.exit();
  });

program.parse(process.argv);

